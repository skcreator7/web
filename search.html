
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Results - SK4FiLM</title>
  <meta name="google-adsense-account" content="ca-pub-5244164301170945">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5244164301170945" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      background: url('https://i.postimg.cc/T2mcBGtv/pxfuel-2.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Josefin Sans', sans-serif;
      color: #fff;
      padding-top: 90px;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(10,10,10,0.8);
      z-index: -1;
    }
    .top-navbar {
      background: rgba(15,23,42,0.95);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      position: fixed;
      top: 0; width: 100%; z-index: 1000;
      padding: 12px 0;
    }
    .brand-text {
      font-size: 1.8rem;
      font-weight: 700;
      background: linear-gradient(90deg, #ff0000, #0066ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .search-section {
      background: rgba(15, 23, 42, 0.7);
      padding: 1.5rem 0;
      text-align: center;
    }
    .search-input {
      width: 90%;
      max-width: 600px;
      background: rgba(60,65,90,0.7);
      border: none;
      border-bottom: 2px solid #ff0000;
      color: #fff;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      font-size: 1.1rem;
    }
    .results-container {
      background: rgba(15,23,42,0.7);
      border-radius: 12px;
      padding: 25px;
      margin-top: 20px;
    }
    .result-item {
      background: rgba(30,41,59,0.8);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 15px;
    }
    .ad-container {
      text-align: center;
      margin: 20px 0;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      padding: 10px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .pagination-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
    @media (max-width:768px) {
      .brand-text { font-size: 1.5rem; }
      .search-input { width: 95%; }
    }
  </style>
</head>
<body>
  <nav class="top-navbar">
    <div class="container d-flex justify-content-between align-items-center">
      <a href="index.html" class="navbar-brand d-flex align-items-center text-decoration-none text-white">
        <img src="https://iili.io/KOlfc41.png" alt="SK4FiLM Logo" height="45" class="me-2 rounded">
        <span class="brand-text">SK4FiLM</span>
      </a>
      <a href="index.html" class="btn btn-outline-light btn-sm">Home</a>
    </div>
  </nav>

  <div class="search-section">
    <input type="text" id="searchInput" class="search-input" placeholder="Search for movies, web series...">
  </div>

  <div class="container">
    <div class="results-container">
      <div id="searchResults"></div>
      <div class="pagination-controls">
        <button id="prevBtn" class="btn btn-outline-light btn-sm">Previous</button>
        <button id="nextBtn" class="btn btn-outline-light btn-sm">Next</button>
      </div>
    </div>
  </div>

  <script>
    const BACKEND_URL = 'https://sk4film.koyeb.app';
    const resultsPerPage = 10;
    let allResults = [], currentPage = 1;

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function formatDate(d) {
      try { return new Date(d).toLocaleDateString(); } catch { return "Recently"; }
    }

    async function performSearch(query) {
      if (!query.trim()) return;
      const resContainer = document.getElementById('searchResults');
      resContainer.innerHTML = '<div class="text-center py-5"><div class="spinner-border text-light"></div><p>Searching...</p></div>';
      try {
        const res = await fetch(`${BACKEND_URL}/api/search?query=${encodeURIComponent(query)}&limit=100`);
        const data = await res.json();
        allResults = data.results || [];
        currentPage = 1;
        displayPage();
      } catch (e) {
        resContainer.innerHTML = '<p class="text-center text-warning">Error loading results.</p>';
      }
    }

    function displayPage() {
      const resContainer = document.getElementById('searchResults');
      const start = (currentPage - 1) * resultsPerPage;
      const pageResults = allResults.slice(start, start + resultsPerPage);
      let html = '';
      pageResults.forEach((r, i) => {
        html += `<div class="result-item animate__animated animate__fadeInUp">
          <div>${r.content || 'No content available'}</div>
          <div class="text-muted small mt-2">${formatDate(r.date)}</div>
        </div>
        <div class="ad-container">
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5244164301170945" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
        </div>`;
      });
      if (!html) html = '<p class="text-center py-5">No results found.</p>';
      resContainer.innerHTML = html;
      (adsbygoogle = window.adsbygoogle || []).push({});
      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = start + resultsPerPage >= allResults.length;
    }

    document.getElementById('searchInput').addEventListener('keypress', e => {
      if (e.key === 'Enter') performSearch(e.target.value);
    });
    document.getElementById('prevBtn').addEventListener('click', () => { if (currentPage > 1) { currentPage--; displayPage(); } });
    document.getElementById('nextBtn').addEventListener('click', () => { if ((currentPage * resultsPerPage) < allResults.length) { currentPage++; displayPage(); } });

    document.addEventListener('DOMContentLoaded', () => {
      const q = new URLSearchParams(window.location.search).get('query') || '';
      if (q) {
        document.getElementById('searchInput').value = q;
        performSearch(q);
      }
    });
  </script>

  <footer class="text-center text-muted py-4" style="background: rgba(15,23,42,0.8); margin-top:40px; font-size: 0.9rem;">
    Disclaimer: This site does not store any files on the server, it only links to media files that are already hosted on Telegram.
  </footer>
</body>

</html>
