<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SK4FiLM - Movie Search</title>
    
    <!-- AdSense -->
    <meta name="google-adsense-account" content="ca-pub-5244164301170945">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5244164301170945" crossorigin="anonymous"></script>
    
    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;600;700&family=Montserrat:wght@800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff0000;
            --secondary: #0066ff;
            --accent: #00ccff;
            --dark: #0a0a0a;
            --darker: #000000;
            --light: #ffffff;
            --text: #f8f9fa;
        }
        
        body {
            background: url('https://i.postimg.cc/T2mcBGtv/pxfuel-2.jpg') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            font-family: 'Josefin Sans', sans-serif;
            color: var(--text);
        }
        
        .glass-card {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
        }
        
        .navbar-custom {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 0, 0, 0.3);
        }
        
        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 100px 0 50px;
        }
        
        .logo-text {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 4rem;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
            margin-bottom: 20px;
        }
        
        .tagline {
            font-size: 1.5rem;
            color: var(--accent);
            margin-bottom: 40px;
            font-style: italic;
        }
        
        .search-container {
            max-width: 600px;
            width: 100%;
            margin-bottom: 60px;
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            color: white;
            padding: 15px 25px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
            color: white;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .search-btn {
            background: linear-gradient(45deg, var(--primary), #cc0000);
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }
        
        .search-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 0, 0.5);
            background: linear-gradient(45deg, #cc0000, var(--primary));
        }
        
        .poster-card {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 100%;
        }
        
        .poster-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(255, 0, 0, 0.4);
            border-color: var(--primary);
        }
        
        .poster-wrapper {
            position: relative;
            overflow: hidden;
            height: 300px;
        }
        
        .poster-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .poster-card:hover .poster-image {
            transform: scale(1.1);
        }
        
        .poster-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.8), rgba(0, 102, 255, 0.6));
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .poster-card:hover .poster-overlay {
            opacity: 1;
        }
        
        .poster-info {
            padding: 15px;
        }
        
        .poster-title {
            color: white;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            line-height: 1.3;
        }
        
        .poster-date {
            color: var(--accent);
            font-size: 0.8rem;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 50px;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .loading-container {
            text-align: center;
            padding: 80px 20px;
        }
        
        .loading-spinner {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .error-container {
            text-align: center;
            padding: 60px 20px;
        }
        
        .error-icon {
            font-size: 4rem;
            color: #ffc107;
            margin-bottom: 20px;
        }
        
        .stats-section {
            background: rgba(0, 0, 0, 0.7);
            padding: 60px 0;
            margin: 80px 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 20px;
        }
        
        .stat-number {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            display: block;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: var(--text);
            margin-top: 10px;
        }
        
        .footer {
            background: rgba(0, 0, 0, 0.9);
            padding: 40px 0;
            margin-top: 100px;
            border-top: 1px solid rgba(255, 0, 0, 0.3);
        }
        
        .social-links a {
            color: var(--text);
            font-size: 1.5rem;
            margin: 0 15px;
            transition: color 0.3s ease;
        }
        
        .social-links a:hover {
            color: var(--primary);
        }
        
        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 768px) {
            .logo-text {
                font-size: 2.5rem;
            }
            
            .tagline {
                font-size: 1.2rem;
            }
            
            .search-input {
                font-size: 1rem;
                padding: 12px 20px;
            }
            
            .search-btn {
                padding: 12px 25px;
            }
            
            .section-title {
                font-size: 2rem;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4" href="#home">
                <i class="fas fa-film text-danger me-2"></i>SK4FiLM
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#latest">Latest</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <h1 class="logo-text animate__animated animate__fadeInDown">SK4FiLM</h1>
            <p class="tagline animate__animated animate__fadeInUp animate__delay-1s">House of Entertainment</p>
            
            <div class="search-container animate__animated animate__fadeInUp animate__delay-2s">
                <form id="searchForm" class="d-flex gap-3">
                    <input type="text" id="searchInput" class="form-control search-input flex-grow-1" 
                           placeholder="Search for movies, web series, or shows..." required>
                    <button type="submit" class="btn search-btn">
                        <i class="fas fa-search me-2"></i>Search
                    </button>
                </form>
            </div>
            
            <div class="animate__animated animate__fadeInUp animate__delay-3s">
                <p class="lead mb-4">Find your favorite movies with our powerful search engine</p>
                <div class="d-flex justify-content-center gap-4 flex-wrap">
                    <div class="badge bg-primary fs-6 px-3 py-2">
                        <i class="fas fa-rocket me-2"></i>Fast Search
                    </div>
                    <div class="badge bg-success fs-6 px-3 py-2">
                        <i class="fas fa-download me-2"></i>Direct Links
                    </div>
                    <div class="badge bg-info fs-6 px-3 py-2">
                        <i class="fas fa-mobile-alt me-2"></i>Mobile Friendly
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Latest Movies Section -->
    <section id="latest" class="py-5">
        <div class="container">
            <h2 class="section-title fade-in">Latest Movies</h2>
            
            <div id="latest-posters" class="row">
                <!-- Real Telegram posters will be loaded here -->
                <div class="loading-container">
                    <div class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <h4>Loading latest movies...</h4>
                    <p class="text-muted">Fetching real data from Telegram channels</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-6">
                    <div class="stat-item">
                        <span class="stat-number" id="totalMovies">0+</span>
                        <div class="stat-label">Movies Available</div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="stat-item">
                        <span class="stat-number" id="totalChannels">3+</span>
                        <div class="stat-label">Telegram Channels</div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="stat-item">
                        <span class="stat-number" id="dailyUpdates">50+</span>
                        <div class="stat-label">Daily Updates</div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="stat-item">
                        <span class="stat-number" id="activeUsers">1K+</span>
                        <div class="stat-label">Active Users</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2">
                    <div class="glass-card p-5 text-center">
                        <h2 class="mb-4">About SK4FiLM</h2>
                        <p class="lead mb-4">Your ultimate destination for finding and discovering movies from multiple Telegram channels.</p>
                        
                        <div class="row g-4 mt-4">
                            <div class="col-md-4">
                                <div class="feature-item">
                                    <i class="fas fa-search fa-3x text-primary mb-3"></i>
                                    <h5>Smart Search</h5>
                                    <p>Quickly find movies across multiple Telegram channels</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-item">
                                    <i class="fas fa-download fa-3x text-success mb-3"></i>
                                    <h5>Direct Access</h5>
                                    <p>Multiple download options with direct links</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-item">
                                    <i class="fas fa-mobile-alt fa-3x text-info mb-3"></i>
                                    <h5>Responsive</h5>
                                    <p>Works perfectly on all devices and platforms</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5 class="text-light">SK4FiLM</h5>
                    <p class="text-muted">Your ultimate movie search engine powered by real Telegram data.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="social-links">
                        <a href="#" title="Telegram"><i class="fab fa-telegram"></i></a>
                        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                    <p class="text-muted mt-3">&copy; 2024 SK4FiLM. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- AdSense Ad -->
    <div class="container my-5">
        <div class="row">
            <div class="col-12 text-center">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-5244164301170945"
                     data-ad-slot="1234567890"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // BACKEND URL - REAL TELEGRAM API
        const BACKEND_URL = 'https://sk4film.koyeb.app';
        
        // Search functionality
        function searchMovie(query) {
            if (!query || query.trim() === '') {
                alert('Please enter a search term');
                return;
            }
            
            // Redirect to search page with query parameter
            const searchURL = `search.html?query=${encodeURIComponent(query.trim())}`;
            window.location.href = searchURL;
        }
        
        // Load real posters from Telegram
        async function loadLatestPosters() {
            const postersContainer = document.getElementById('latest-posters');
            
            try {
                console.log('🔄 Loading real posters from Telegram...');
                
                // Show loading state
                postersContainer.innerHTML = `
                    <div class="loading-container">
                        <div class="loading-spinner">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <h4>Loading latest movies...</h4>
                        <p class="text-muted">Fetching real data from Telegram channels</p>
                    </div>
                `;
                
                // API call for REAL posters - NO MOCK DATA
                const response = await fetch(`${BACKEND_URL}/api/latest_posters?limit=8`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status} - ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('✅ Real Telegram Posters Response:', data);
                
                if (data.status === 'success' && data.posters && data.posters.length > 0) {
                    displayRealPosters(data.posters);
                    console.log(`✅ Displayed ${data.posters.length} real posters`);
                } else {
                    showNoPosters('No movies available from Telegram channels');
                }
                
            } catch (error) {
                console.error('❌ Poster Loading Error:', error);
                showPosterError('Failed to load movies from Telegram');
            }
        }
        
        function displayRealPosters(posters) {
            const postersContainer = document.getElementById('latest-posters');
            
            const posterHTML = posters.map((poster, index) => `
                <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                    <div class="poster-card fade-in" style="animation-delay: ${index * 0.1}s">
                        <div class="poster-wrapper">
                            <img src="${BACKEND_URL}/api/get_poster?file_id=${poster.photo}" 
                                 alt="${escapeHtml(poster.caption || 'Movie Poster')}"
                                 class="poster-image"
                                 loading="lazy"
                                 onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDIwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiMzMzMzMzMiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBmaWxsPSIjZmZmZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Tm8gUG9zdGVyPC90ZXh0Pjwvc3ZnPg=='" />
                            <div class="poster-overlay">
                                <button class="btn btn-primary btn-lg" onclick="searchMovie('${escapeHtml(extractMovieName(poster.caption))}')">
                                    <i class="fas fa-search me-2"></i>Search
                                </button>
                            </div>
                        </div>
                        <div class="poster-info">
                            <h6 class="poster-title">${truncateText(poster.caption, 60)}</h6>
                            <small class="poster-date">
                                <i class="fas fa-calendar-alt me-1"></i>${formatDate(poster.date)}
                            </small>
                        </div>
                    </div>
                </div>
            `).join('');
            
            postersContainer.innerHTML = posterHTML;
        }
        
        function showNoPosters(message) {
            const postersContainer = document.getElementById('latest-posters');
            postersContainer.innerHTML = `
                <div class="col-12">
                    <div class="error-container">
                        <div class="error-icon">
                            <i class="fas fa-film"></i>
                        </div>
                        <h4>${message}</h4>
                        <p class="text-muted">Please check back later or verify Telegram connection.</p>
                        <button class="btn btn-primary" onclick="loadLatestPosters()">
                            <i class="fas fa-redo me-2"></i>Retry Loading
                        </button>
                    </div>
                </div>
            `;
        }
        
        function showPosterError(message) {
            const postersContainer = document.getElementById('latest-posters');
            postersContainer.innerHTML = `
                <div class="col-12">
                    <div class="error-container">
                        <div class="error-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h4>Connection Error</h4>
                        <p class="text-muted">${message}</p>
                        <p class="text-muted">Please check your internet connection or try again later.</p>
                        <button class="btn btn-warning" onclick="loadLatestPosters()">
                            <i class="fas fa-redo me-2"></i>Retry
                        </button>
                    </div>
                </div>
            `;
        }
        
        // Utility functions
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function truncateText(text, maxLength) {
            if (!text) return 'Movie Title';
            return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
        }
        
        function extractMovieName(caption) {
            if (!caption) return '';
            // Extract movie name from caption (basic extraction)
            const lines = caption.split('\n');
            return lines[0] || caption.substring(0, 50);
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'Recently';
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return 'Today';
            if (diffDays === 2) return 'Yesterday';
            if (diffDays <= 7) return `${diffDays} days ago`;
            
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric'
            });
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 SK4FiLM Loading - REAL DATA MODE');
            
            // Load real posters immediately
            loadLatestPosters();
            
            // Refresh posters every 10 minutes
            setInterval(loadLatestPosters, 600000);
            
            // Search form handler
            const searchForm = document.getElementById('searchForm');
            const searchInput = document.getElementById('searchInput');
            
            if (searchForm) {
                searchForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const query = searchInput.value.trim();
                    searchMovie(query);
                });
            }
            
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const query = this.value.trim();
                        searchMovie(query);
                    }
                });
            }
            
            // Animate stats on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, observerOptions);
            
            // Observe elements for animation
            document.querySelectorAll('.stat-item').forEach(el => {
                observer.observe(el);
            });
        });
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Console message
        console.log('%c🎬 SK4FiLM - Real Telegram Data Only', 'color: #ff0000; font-size: 16px; font-weight: bold;');
        console.log('%c📡 Connecting to: ' + BACKEND_URL, 'color: #00ccff; font-size: 12px;');
        
    </script>
</body>
</html>
